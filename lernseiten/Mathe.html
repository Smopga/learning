<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Mathe Pro</title>
<style>
body {
    margin: 0;
    font-family: system-ui, sans-serif;
    background: #0f1220;
    color: #fff;
    padding: 20px;
}

h1 {
    text-align: center;
}

.panel {
    background: #1c1f3a;
    padding: 15px;
    border-radius: 14px;
    margin-bottom: 15px;
}

.options {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    gap: 8px;
}

label {
    background: #2a2e5a;
    padding: 10px;
    border-radius: 10px;
    cursor: pointer;
}

label input {
    margin-right: 6px;
}

.task {
    font-size: 26px;
    text-align: center;
    margin: 20px 0;
}

.answer {
    width: 100%;
    padding: 12px;
    font-size: 18px;
    border-radius: 10px;
    border: none;
}

button {
    width: 100%;
    margin-top: 10px;
    padding: 14px;
    font-size: 18px;
    border: none;
    border-radius: 12px;
    background: #4cafef;
    color: black;
    cursor: pointer;
}

button:hover {
    opacity: 0.9;
}

.status {
    text-align: center;
    margin-top: 10px;
    font-size: 16px;
}

.score {
    text-align: center;
    font-size: 18px;
}
</style>
</head>
<body>

<h1>üßÆ Mathe Pro</h1>

<div class="panel">
    <strong>Schwierigkeit</strong>
    <select id="difficulty" class="answer">
        <option value="10">Leicht</option>
        <option value="50">Mittel</option>
        <option value="100">Schwer</option>
    </select>
</div>

<div class="panel">
    <strong>Aufgabentypen</strong>
    <div class="options">
        <label><input type="checkbox" id="add" checked> Addition</label>
        <label><input type="checkbox" id="sub" checked> Subtraktion</label>
        <label><input type="checkbox" id="mul" checked> Multiplikation</label>
        <label><input type="checkbox" id="div"> Division</label>
        <label><input type="checkbox" id="sqrt"> Wurzel</label>
        <label><input type="checkbox" id="pow"> Potenz</label>
        <label><input type="checkbox" id="brackets" checked> Klammern</label>
        <label><input type="checkbox" id="negative"> Negative Zahlen</label>
        <label><input type="checkbox" id="decimals"> Kommazahlen</label>
    </div>
</div>

<div class="panel">
    <div class="task" id="task">Neue Aufgabe starten</div>
    <input id="answer" class="answer" type="number" step="any">
    <button onclick="check()">Antwort pr√ºfen</button>
    <div class="status" id="status"></div>
    <div class="score">Punkte: <span id="score">0</span></div>
</div>

<a href="../index.html" style="color:#8ab4ff">‚Üê Zur√ºck</a>

<script>
let score = 0;
let solution = 0;

function r(max) {
    return Math.floor(Math.random() * max) + 1;
}

function newTask() {
    const max = Number(difficulty.value);
    let parts = [];

    if (add.checked) parts.push("+");
    if (sub.checked) parts.push("-");
    if (mul.checked) parts.push("*");
    if (div.checked) parts.push("/");
    if (pow.checked) parts.push("^");

    if (parts.length === 0) {
        task.textContent = "Bitte Aufgabentyp w√§hlen";
        return;
    }

    let a = r(max);
    let b = r(10);
    let c = r(10);

    let expr = `${a} ${parts[Math.floor(Math.random()*parts.length)]} ${b}`;

    if (brackets.checked) {
        expr = `(${expr}) ${parts[Math.floor(Math.random()*parts.length)]} ${c}`;
    }

    if (sqrt.checked && Math.random() > 0.6) {
        const s = r(15);
        expr = `Math.sqrt(${s*s}) + ${r(10)}`;
    }

    solution = Math.round(eval(expr) * 100) / 100;
    task.textContent = expr.replace("Math.sqrt", "‚àö");

    status.textContent = "";
    answer.value = "";
}

function check() {
    const user = Number(answer.value);
    if (Math.abs(user - solution) < 0.01) {
        score += 5;
        status.textContent = "‚úÖ Richtig! +5";
        newTask();
    } else {
        score -= 10;
        status.textContent = "‚ùå Falsch! Richtige L√∂sung: " + solution;
    }
    scoreSpan.textContent = score;
}

const scoreSpan = document.getElementById("score");
newTask();
</script>

</body>
</html>
